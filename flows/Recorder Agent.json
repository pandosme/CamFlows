[
    {
        "id": "ae269942a71da74c",
        "type": "tab",
        "label": "Recorder Agent",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f2ac5e16e25fb54f",
        "type": "group",
        "z": "ae269942a71da74c",
        "name": "Initialization",
        "style": {
            "stroke": "#000000",
            "fill": "#ffffbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "076645d048e5163a",
            "03e7c9d37aec2a14",
            "29ed919f648b86ab",
            "ae4f3b1ddd90fb47",
            "4cec169253ab6e15",
            "06336c111a12b07a",
            "13d479556393dd1b",
            "bc8ac3669c6a9fdd",
            "36ed9b83e19ab3e5",
            "0bf1eaf3f9f8c92f"
        ],
        "x": 274,
        "y": 999,
        "w": 1132,
        "h": 242
    },
    {
        "id": "cfe8654acc3a0779",
        "type": "group",
        "z": "ae269942a71da74c",
        "name": "Trigger",
        "style": {
            "label": true,
            "stroke": "#000000",
            "fill": "#e3f3d3",
            "color": "#000000"
        },
        "nodes": [
            "63826365c56e8da6",
            "581749b9052f0d27",
            "93a47fe397484a42",
            "2b0dbbcbaa1377bb",
            "4d5977b35f878754",
            "44a5ce4770b9f16d",
            "83e979a6e124a84c",
            "a6c78afaf91c0add",
            "f223baa94ce76187"
        ],
        "x": 274,
        "y": 119,
        "w": 892,
        "h": 242
    },
    {
        "id": "90ddef6b96ad0392",
        "type": "group",
        "z": "ae269942a71da74c",
        "name": "Recording Controller",
        "style": {
            "stroke": "#000000",
            "fill": "#bfdbef",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "15198ac636a55b22",
            "2f3ca18dfccdd187",
            "b3b5782cfb4f7c24",
            "fecca43c7d977453",
            "400027905a2f0a85",
            "13bdcb483d207564",
            "2a3b54bfd9a82d36",
            "dfe8c7125f5edf06",
            "fd6b16d14e63cc45",
            "5557bad38b472e44",
            "e2a9b19b30e83254",
            "5b96b38d04227b8f",
            "e81ac1d617cb72fb",
            "a82f4707f7d9a754",
            "d26ffab47ccd33a5",
            "24c1a27f95d4f598",
            "af7d03cf2de91230",
            "7841c1ea2e076cf2",
            "1b0cee4c4f2bb10e",
            "5a42be09e6f6b8e7",
            "25f140717e2c97bf"
        ],
        "x": 274,
        "y": 419,
        "w": 1172,
        "h": 322
    },
    {
        "id": "2c977112e11f335a",
        "type": "group",
        "z": "ae269942a71da74c",
        "name": "Eception handling",
        "style": {
            "stroke": "#000000",
            "fill": "#ffbfbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "a28617fccfbcf956",
            "f31d061045057462",
            "7cc072328cf25aa6",
            "161bd4d4c74b7e65"
        ],
        "x": 274,
        "y": 1599,
        "w": 642,
        "h": 142
    },
    {
        "id": "430453b76d8e9ee9",
        "type": "group",
        "z": "ae269942a71da74c",
        "name": "Recording Table",
        "style": {
            "stroke": "#000000",
            "fill": "#bfdbef",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "747deb95185e3da8",
            "88ee7523d8d339d9",
            "553e5d4be6f404c2",
            "3cd08e2ba2f570db",
            "b0d3633299f17018",
            "c8b01f87cc75e5fb"
        ],
        "x": 274,
        "y": 799,
        "w": 852,
        "h": 142
    },
    {
        "id": "a31ad7d819581319",
        "type": "group",
        "z": "ae269942a71da74c",
        "name": "Configuration",
        "style": {
            "label": true,
            "stroke": "#000000",
            "fill": "#ffffbf",
            "color": "#000000"
        },
        "nodes": [
            "9b41f392ab35be65",
            "2d5f1a01a0f1fc38",
            "f43db79cc34039cf",
            "13c8bd3efb2716d6",
            "01df7f3806363b53",
            "8b822c264671ce3b",
            "1928563fb933c2bb",
            "6d3da6aaf5c94229",
            "4a58bcc10619d994",
            "fc6559eddcf1544f",
            "b671b85e6d46254e",
            "9206a224d838c9aa",
            "64f59c9f552452b8",
            "68192e443024c664",
            "3e7eb6d653124d9f",
            "f893da208e47d972",
            "d1295665c05ba3b8",
            "436bca635cc6eb6e",
            "9e32eff6834776bd"
        ],
        "x": 274,
        "y": 1299,
        "w": 1212,
        "h": 242
    },
    {
        "id": "68192e443024c664",
        "type": "junction",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "x": 580,
        "y": 1340,
        "wires": [
            [
                "1928563fb933c2bb",
                "f43db79cc34039cf",
                "4a58bcc10619d994",
                "b671b85e6d46254e"
            ]
        ]
    },
    {
        "id": "3e7eb6d653124d9f",
        "type": "junction",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "x": 1460,
        "y": 1380,
        "wires": [
            [
                "312b5c9b8a23db7a"
            ]
        ]
    },
    {
        "id": "f223baa94ce76187",
        "type": "junction",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "x": 1140,
        "y": 160,
        "wires": [
            [
                "987b94bfde829b91"
            ]
        ]
    },
    {
        "id": "f893da208e47d972",
        "type": "junction",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "x": 300,
        "y": 1340,
        "wires": [
            [
                "8b822c264671ce3b"
            ]
        ]
    },
    {
        "id": "e81ac1d617cb72fb",
        "type": "junction",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "x": 300,
        "y": 460,
        "wires": [
            [
                "15198ac636a55b22",
                "5b96b38d04227b8f"
            ]
        ]
    },
    {
        "id": "63826365c56e8da6",
        "type": "trigger",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "",
        "op1": "true",
        "op2": "false",
        "op1type": "bool",
        "op2type": "bool",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 790,
        "y": 160,
        "wires": [
            [
                "2b0dbbcbaa1377bb"
            ]
        ]
    },
    {
        "id": "15198ac636a55b22",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "FMR Controller",
        "func": "var device = global.get(\"device\");\nif( !device ) {\n    node.error(\"No device defined\",msg);\n    return;\n}\n\nvar settings = flow.get(\"settings\");\nif( !settings ) {\n    node.error(\"No settings defined\",msg);\n    return;\n}\n\nif( settings.method !== \"FMR\")\n    return;\n\nif( settings.server.length < 5 ) {\n    node.error(\"No Server defined\",msg);\n    return;\n}\n\nif( msg.payload === true ) {\n    msg.url = \"http://\" +settings.server + \"/record/start\" ;\n\n    msg.payload = {\n        serial: device.serial,\n        buffer: settings.bufferSeconds,\n        tag: msg.tag || \"Recording\",\n        method: \"FMR\"\n    }\n    return msg;\n}\n\n\nif (msg.payload === false) {\n    msg.url = \"http://\" + settings.server + \"/record/stop\";\n\n    msg.payload = {\n        serial: device.serial,\n        buffer: settings.bufferSeconds,\n        tag: msg.tag || \"Recording\",\n        method: \"FMR\"\n    }\n    return msg;\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 460,
        "wires": [
            [
                "2f3ca18dfccdd187"
            ]
        ]
    },
    {
        "id": "2f3ca18dfccdd187",
        "type": "http request",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 610,
        "y": 460,
        "wires": [
            [
                "b3b5782cfb4f7c24"
            ]
        ]
    },
    {
        "id": "0bf1eaf3f9f8c92f",
        "type": "ui_button",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "",
        "group": "dbb8d0391d851126",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": true,
        "label": "Start",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 350,
        "y": 1040,
        "wires": [
            [
                "076645d048e5163a"
            ]
        ]
    },
    {
        "id": "9b41f392ab35be65",
        "type": "ui_dropdown",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "Method",
        "label": "",
        "tooltip": "",
        "place": "Select method",
        "group": "dbb8d0391d851126",
        "order": 5,
        "width": "8",
        "height": "1",
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "None",
                "value": "None",
                "type": "str"
            },
            {
                "label": "FMR",
                "value": "FMR",
                "type": "str"
            },
            {
                "label": "SD Card",
                "value": "SD_Direct",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 920,
        "y": 1420,
        "wires": [
            [
                "2d5f1a01a0f1fc38"
            ]
        ]
    },
    {
        "id": "2d5f1a01a0f1fc38",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.method",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1420,
        "wires": [
            [
                "3e7eb6d653124d9f"
            ]
        ]
    },
    {
        "id": "f43db79cc34039cf",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "settings.bufferSeconds",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1460,
        "wires": [
            [
                "13c8bd3efb2716d6"
            ]
        ]
    },
    {
        "id": "13c8bd3efb2716d6",
        "type": "ui_numeric",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "label": "Pre/Post buffer",
        "tooltip": "",
        "group": "dbb8d0391d851126",
        "order": 8,
        "width": "5",
        "height": "1",
        "wrap": false,
        "passthru": false,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}}s",
        "min": "1",
        "max": "30",
        "step": 1,
        "className": "",
        "x": 940,
        "y": 1460,
        "wires": [
            [
                "01df7f3806363b53"
            ]
        ]
    },
    {
        "id": "01df7f3806363b53",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.bufferSeconds",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1190,
        "y": 1460,
        "wires": [
            [
                "3e7eb6d653124d9f"
            ]
        ]
    },
    {
        "id": "987b94bfde829b91",
        "type": "link out",
        "z": "ae269942a71da74c",
        "name": "Detection",
        "mode": "link",
        "links": [
            "edeaa159548fd995"
        ],
        "x": 1345,
        "y": 160,
        "wires": []
    },
    {
        "id": "edeaa159548fd995",
        "type": "link in",
        "z": "ae269942a71da74c",
        "name": "link in 13",
        "links": [
            "987b94bfde829b91"
        ],
        "x": 105,
        "y": 460,
        "wires": [
            [
                "e81ac1d617cb72fb"
            ]
        ]
    },
    {
        "id": "0534962b22f6775b",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Record",
        "info": "",
        "x": 190,
        "y": 460,
        "wires": []
    },
    {
        "id": "581749b9052f0d27",
        "type": "ui_button",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "",
        "group": "dbb8d0391d851126",
        "order": 9,
        "width": "0",
        "height": "0",
        "passthru": true,
        "label": "Test 10 second recording",
        "tooltip": "",
        "color": "",
        "bgcolor": "green",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 410,
        "y": 160,
        "wires": [
            [
                "93a47fe397484a42"
            ]
        ]
    },
    {
        "id": "21696568a201031c",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Version 1.2 [README]",
        "info": "Install a recording server that system clients can view and control recordings from\nhttps://github.com/pandosme/recorder\n\nAddtional flows that needs to be imported\n 1. Camera Info:\n    Needed for Dashboard playback and device serialnumber\n    https://github.com/pandosme/CamFlows/blob/master/flows/Camera%20Info.json\n 2. Convert SD Recordings to MP4:\n    Needed if recordings will be stored on SD Card\n    https://github.com/pandosme/CamFlows/blob/master/flows/Convert%20SD%20Recording%20to%20MP4.json\n",
        "x": 380,
        "y": 60,
        "wires": []
    },
    {
        "id": "e908b3adf5c1fcf6",
        "type": "ui_toast",
        "z": "ae269942a71da74c",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1050,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "aac2a34732bfe536",
        "type": "link out",
        "z": "ae269942a71da74c",
        "name": "exception",
        "mode": "link",
        "links": [
            "c1af8cb48dce2249",
            "3c2ea4cc7b1c8688",
            "62d75f5c16e43097"
        ],
        "x": 1125,
        "y": 1640,
        "wires": []
    },
    {
        "id": "a28617fccfbcf956",
        "type": "catch",
        "z": "ae269942a71da74c",
        "g": "2c977112e11f335a",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 380,
        "y": 1640,
        "wires": [
            [
                "f31d061045057462",
                "161bd4d4c74b7e65"
            ]
        ]
    },
    {
        "id": "f31d061045057462",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "2c977112e11f335a",
        "name": "Message",
        "func": "msg.topic = \"Recording\";\nmsg.payload = msg.error;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 1640,
        "wires": [
            [
                "7cc072328cf25aa6",
                "aac2a34732bfe536"
            ]
        ]
    },
    {
        "id": "7cc072328cf25aa6",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "2c977112e11f335a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1700,
        "wires": [
            [
                "e908b3adf5c1fcf6"
            ]
        ]
    },
    {
        "id": "36e8a6c5813a7f70",
        "type": "inject",
        "z": "ae269942a71da74c",
        "name": "On start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 1040,
        "wires": [
            [
                "0bf1eaf3f9f8c92f"
            ]
        ]
    },
    {
        "id": "fd1000933cd8f20a",
        "type": "link out",
        "z": "ae269942a71da74c",
        "name": "Initialized",
        "mode": "link",
        "links": [
            "2bf6c2312566bdbc",
            "72323a4abb65127d",
            "a0928131ca946860",
            "338c26761a633ad5"
        ],
        "x": 1585,
        "y": 1040,
        "wires": []
    },
    {
        "id": "95ac971532acecc9",
        "type": "link in",
        "z": "ae269942a71da74c",
        "name": "Update Settings",
        "links": [
            "337a5d3c4859afbe",
            "8063132e4678e4de",
            "312b5c9b8a23db7a",
            "3fcf9d35c680732e",
            "7437f3299275bbb4",
            "7cd22aae86dc94e6",
            "03d4d4ea47ae1a22"
        ],
        "x": 125,
        "y": 1200,
        "wires": [
            [
                "13d479556393dd1b"
            ]
        ]
    },
    {
        "id": "403ece4ffb0bcbbc",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Init",
        "info": "",
        "x": 1490,
        "y": 1040,
        "wires": []
    },
    {
        "id": "964cbd9b082f1443",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Update",
        "info": "",
        "x": 210,
        "y": 1200,
        "wires": []
    },
    {
        "id": "076645d048e5163a",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "Default settings",
        "func": "var device = global.get(\"device\");\n\nif(!device) {\n    node.error(\"Missing global.device. Check Readme\",msg);\n    return;\n}\n\nif(!device.hasOwnProperty(\"camera\")) {\n    node.error(\"Missing global.device.camera. Check Readme\",msg);\n    return;\n}\n\nmsg.payload = {\n    service: \"Recording\",\n    name: device.serial,\n    server: \"\",\n    method: \"None\",\n    trigger: \"None\",\n    bufferSeconds: 0\n}\n\nif( device.hostname )\n    msg.payload.name = device.hostname;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1040,
        "wires": [
            [
                "03e7c9d37aec2a14"
            ]
        ]
    },
    {
        "id": "03e7c9d37aec2a14",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "flow.settings",
        "rules": [
            {
                "t": "set",
                "p": "settings",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1040,
        "wires": [
            [
                "29ed919f648b86ab"
            ]
        ]
    },
    {
        "id": "29ed919f648b86ab",
        "type": "file in",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "",
        "filename": "sdcard/Recording.json",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 970,
        "y": 1040,
        "wires": [
            [
                "ae4f3b1ddd90fb47"
            ]
        ]
    },
    {
        "id": "ae4f3b1ddd90fb47",
        "type": "json",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1170,
        "y": 1040,
        "wires": [
            [
                "4cec169253ab6e15"
            ]
        ]
    },
    {
        "id": "4cec169253ab6e15",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "flow.settings",
        "rules": [
            {
                "t": "set",
                "p": "settings",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 1040,
        "wires": [
            [
                "fd1000933cd8f20a"
            ]
        ]
    },
    {
        "id": "06336c111a12b07a",
        "type": "catch",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "",
        "scope": [
            "29ed919f648b86ab"
        ],
        "uncaught": false,
        "x": 360,
        "y": 1120,
        "wires": [
            [
                "13d479556393dd1b"
            ]
        ]
    },
    {
        "id": "13d479556393dd1b",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "flow.settings",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "settings",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1200,
        "wires": [
            [
                "bc8ac3669c6a9fdd"
            ]
        ]
    },
    {
        "id": "bc8ac3669c6a9fdd",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "pretty",
        "func": "msg.payload = JSON.stringify(msg.payload,null,2);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1200,
        "wires": [
            [
                "36ed9b83e19ab3e5"
            ]
        ]
    },
    {
        "id": "36ed9b83e19ab3e5",
        "type": "file",
        "z": "ae269942a71da74c",
        "g": "f2ac5e16e25fb54f",
        "name": "",
        "filename": "sdcard/Recording.json",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 890,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "8b822c264671ce3b",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "settings",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 1340,
        "wires": [
            [
                "68192e443024c664"
            ]
        ]
    },
    {
        "id": "72323a4abb65127d",
        "type": "link in",
        "z": "ae269942a71da74c",
        "name": "link in 29",
        "links": [
            "fd1000933cd8f20a"
        ],
        "x": 125,
        "y": 1340,
        "wires": [
            [
                "f893da208e47d972"
            ]
        ]
    },
    {
        "id": "1928563fb933c2bb",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.method",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1420,
        "wires": [
            [
                "9b41f392ab35be65"
            ]
        ]
    },
    {
        "id": "312b5c9b8a23db7a",
        "type": "link out",
        "z": "ae269942a71da74c",
        "name": "link out 22",
        "mode": "link",
        "links": [
            "95ac971532acecc9"
        ],
        "x": 1685,
        "y": 1380,
        "wires": []
    },
    {
        "id": "51f775fef0c750be",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Update",
        "info": "",
        "x": 1570,
        "y": 1380,
        "wires": []
    },
    {
        "id": "6d3da6aaf5c94229",
        "type": "ui_text_input",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "label": "Storage server address",
        "tooltip": "",
        "group": "dbb8d0391d851126",
        "order": 3,
        "width": "8",
        "height": "1",
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 970,
        "y": 1380,
        "wires": [
            [
                "fc6559eddcf1544f"
            ]
        ]
    },
    {
        "id": "4a58bcc10619d994",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.server",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1380,
        "wires": [
            [
                "6d3da6aaf5c94229"
            ]
        ]
    },
    {
        "id": "fc6559eddcf1544f",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.server",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1380,
        "wires": [
            [
                "3e7eb6d653124d9f"
            ]
        ]
    },
    {
        "id": "93a47fe397484a42",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "Validate",
        "func": "var settings = flow.get(\"settings\");\nif( !settings ) {\n    node.error(\"No settings detected\",msg);\n    return;\n}\n\nif( settings.server.length < 5 ) {\n    node.error(\"No recording server defined\");\n    return;\n}\n\nif( settings.method === \"None\" ) {\n    node.error(\"No method server defined\");\n    return;\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 160,
        "wires": [
            [
                "63826365c56e8da6"
            ]
        ]
    },
    {
        "id": "2b0dbbcbaa1377bb",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "tag",
                "pt": "msg",
                "to": "Test",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 160,
        "wires": [
            [
                "f223baa94ce76187"
            ]
        ]
    },
    {
        "id": "b3b5782cfb4f7c24",
        "type": "switch",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "Error",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "400",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 790,
        "y": 460,
        "wires": [
            [
                "fecca43c7d977453"
            ]
        ]
    },
    {
        "id": "fecca43c7d977453",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "Throw",
        "func": "node.error(\"Recording failed\",msg);\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "400027905a2f0a85",
        "type": "mqtt in",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "topic": "recorder/starting/+",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "30a8c3248949b084",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 640,
        "wires": [
            [
                "2a3b54bfd9a82d36"
            ]
        ]
    },
    {
        "id": "13bdcb483d207564",
        "type": "mqtt in",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "topic": "recorder/stopped/+",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "30a8c3248949b084",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 700,
        "wires": [
            [
                "dfe8c7125f5edf06"
            ]
        ]
    },
    {
        "id": "2a3b54bfd9a82d36",
        "type": "switch",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "This camera",
        "property": "payload.serial",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "device.serial",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 640,
        "wires": [
            [
                "5557bad38b472e44"
            ]
        ]
    },
    {
        "id": "dfe8c7125f5edf06",
        "type": "switch",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "This camera",
        "property": "payload.serial",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "device.serial",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 700,
        "wires": [
            [
                "e2a9b19b30e83254"
            ]
        ]
    },
    {
        "id": "fd6b16d14e63cc45",
        "type": "ui_text",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "group": "fda7172182602d9f",
        "order": 2,
        "width": "5",
        "height": "1",
        "name": "",
        "label": "Ongoing recording:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1130,
        "y": 640,
        "wires": []
    },
    {
        "id": "5557bad38b472e44",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tag",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 640,
        "wires": [
            [
                "fd6b16d14e63cc45"
            ]
        ]
    },
    {
        "id": "e2a9b19b30e83254",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 700,
        "wires": [
            [
                "fd6b16d14e63cc45"
            ]
        ]
    },
    {
        "id": "b671b85e6d46254e",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.trigger",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1500,
        "wires": [
            [
                "9206a224d838c9aa"
            ]
        ]
    },
    {
        "id": "9206a224d838c9aa",
        "type": "ui_dropdown",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "Trigger",
        "label": "",
        "tooltip": "",
        "place": "Select Trigger",
        "group": "dbb8d0391d851126",
        "order": 7,
        "width": "8",
        "height": "1",
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "No trigger (or External Trigger)",
                "value": "None",
                "type": "str"
            },
            {
                "label": "Presence (Object Detections)",
                "value": "presence",
                "type": "str"
            },
            {
                "label": "Axis AOA Detection",
                "value": "aoa",
                "type": "str"
            },
            {
                "label": "Axis Motion Detection",
                "value": "vmd",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 920,
        "y": 1500,
        "wires": [
            [
                "64f59c9f552452b8"
            ]
        ]
    },
    {
        "id": "64f59c9f552452b8",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.trigger",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1500,
        "wires": [
            [
                "3e7eb6d653124d9f"
            ]
        ]
    },
    {
        "id": "832b01aceef952fd",
        "type": "link in",
        "z": "ae269942a71da74c",
        "name": "Presence Detection",
        "links": [
            "f2db1cc6ac8e0108",
            "e0cfe5426bb6c502"
        ],
        "x": 115,
        "y": 220,
        "wires": [
            [
                "4d5977b35f878754"
            ]
        ]
    },
    {
        "id": "4d5977b35f878754",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "Presense",
        "func": "var settings = flow.get(\"settings\");\nif(!settings)\n    return;\nif( settings.trigger !== \"presence\")\n    return;\nmsg.tag = \"Presence\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 220,
        "wires": [
            [
                "f223baa94ce76187"
            ]
        ]
    },
    {
        "id": "44a5ce4770b9f16d",
        "type": "Events",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "group": "application",
        "initialization": false,
        "x": 400,
        "y": 280,
        "wires": [
            [
                "83e979a6e124a84c",
                "a6c78afaf91c0add"
            ]
        ]
    },
    {
        "id": "83e979a6e124a84c",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "AOA Detection",
        "func": "var settings = flow.get(\"settings\");\nif(!settings)\n    return;\nif( settings.trigger !== \"aoa\")\n    return;\nif (msg.topic !== \"cameraapplicationplatform/objectanalytics/device1scenarioany\")\n    return; \n\nmsg.tag = \"AOA\";\nmsg.topic = \"AOA\";\nmsg.payload = msg.payload.active;\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 280,
        "wires": [
            [
                "f223baa94ce76187"
            ]
        ]
    },
    {
        "id": "a6c78afaf91c0add",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "cfe8654acc3a0779",
        "name": "Motion Detection",
        "func": "var settings = flow.get(\"settings\");\nif(!settings)\n    return;\nif( settings.trigger !== \"vmd\")\n    return;\nif (msg.topic !== \"cameraapplicationplatform/vmd/camera1profileany\")\n    return; \n\nmsg.tag = \"VMD\";\nmsg.topic = \"VMD\";\nmsg.payload = msg.payload.active;\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 320,
        "wires": [
            [
                "f223baa94ce76187"
            ]
        ]
    },
    {
        "id": "cea31812dc6c3b88",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Presence",
        "info": "",
        "x": 200,
        "y": 220,
        "wires": []
    },
    {
        "id": "dcc399ee0c7748d3",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Detection",
        "info": "",
        "x": 1240,
        "y": 160,
        "wires": []
    },
    {
        "id": "74b9faa37007df6f",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "MQTT",
        "info": "",
        "x": 1030,
        "y": 1640,
        "wires": []
    },
    {
        "id": "747deb95185e3da8",
        "type": "ui_button",
        "z": "ae269942a71da74c",
        "g": "430453b76d8e9ee9",
        "name": "",
        "group": "fda7172182602d9f",
        "order": 1,
        "width": "4",
        "height": "1",
        "passthru": true,
        "label": "Refresh",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 360,
        "y": 840,
        "wires": [
            [
                "88ee7523d8d339d9"
            ]
        ]
    },
    {
        "id": "88ee7523d8d339d9",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "430453b76d8e9ee9",
        "name": "List Last Hour",
        "func": "var device = global.get(\"device\");\nif (!device) {\n    node.error(\"No device defined\", msg);\n    return;\n}\n\nvar settings = flow.get(\"settings\");\nif (!settings) {\n    node.error(\"No settings defined\", msg);\n    return;\n}\n\nmsg.url = \"http://\" + settings.server + \"/list?serial=\" + device.serial;\nmsg.url += \"&from=\" + (new Date().getTime() - (1 * 3600 * 1000));\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 840,
        "wires": [
            [
                "553e5d4be6f404c2"
            ]
        ]
    },
    {
        "id": "553e5d4be6f404c2",
        "type": "http request",
        "z": "ae269942a71da74c",
        "g": "430453b76d8e9ee9",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 790,
        "y": 840,
        "wires": [
            [
                "3cd08e2ba2f570db"
            ]
        ]
    },
    {
        "id": "3cd08e2ba2f570db",
        "type": "ui_table",
        "z": "ae269942a71da74c",
        "g": "430453b76d8e9ee9",
        "group": "fda7172182602d9f",
        "name": "",
        "order": 0,
        "width": "13",
        "height": "12",
        "columns": [
            {
                "field": "time",
                "title": "Time",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "duration",
                "title": "Duration (s)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "tag",
                "title": "Tag",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 550,
        "y": 900,
        "wires": [
            [
                "b0d3633299f17018"
            ]
        ]
    },
    {
        "id": "b0d3633299f17018",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "430453b76d8e9ee9",
        "name": "Video player",
        "func": "var recording = msg.payload;\nvar settings = flow.get(\"settings\");\nmsg.payload = '<video controls autoplay>';\nmsg.payload += '<source src=\"' + recording.url + '\" type=\"video/mp4\">';\nmsg.payload += '</video>';\nmsg.topic = recording.time + \" [\" + recording.tag + \"]\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 900,
        "wires": [
            [
                "c8b01f87cc75e5fb"
            ]
        ]
    },
    {
        "id": "c8b01f87cc75e5fb",
        "type": "ui_toast",
        "z": "ae269942a71da74c",
        "g": "430453b76d8e9ee9",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1030,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "61bf360d744c9ea0",
        "type": "comment",
        "z": "ae269942a71da74c",
        "name": "Init",
        "info": "",
        "x": 210,
        "y": 1340,
        "wires": []
    },
    {
        "id": "d1295665c05ba3b8",
        "type": "ui_template",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "group": "dbb8d0391d851126",
        "name": "Storage",
        "order": 4,
        "width": "2",
        "height": "1",
        "format": "<h3>Storage</h3>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 500,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "436bca635cc6eb6e",
        "type": "ui_template",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "group": "dbb8d0391d851126",
        "name": "Trigger",
        "order": 6,
        "width": "2",
        "height": "1",
        "format": "<h3>Trigger</h3>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 500,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "9e32eff6834776bd",
        "type": "ui_template",
        "z": "ae269942a71da74c",
        "g": "a31ad7d819581319",
        "group": "dbb8d0391d851126",
        "name": "Server",
        "order": 2,
        "width": "2",
        "height": "1",
        "format": "<h3>Server</h3>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 490,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "5b96b38d04227b8f",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "SD Direct",
        "func": "var device = global.get(\"device\");\nif( !device ) {\n    node.error(\"No device defined\",msg);\n    return;\n}\n\nvar settings = flow.get(\"settings\");\nif( !settings ) {\n    node.error(\"No settings defined\",msg);\n    return;\n}\n\nif( settings.method !== \"SD_Direct\")\n    return;\n\nif( settings.server.length < 5 ) {\n    node.error(\"No Server defined\",msg);\n    return;\n}\n\nif( msg.payload === true )\n    return msg;\n\n\nif (msg.payload === false)\n    return msg;\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 520,
        "wires": [
            [
                "d26ffab47ccd33a5",
                "24c1a27f95d4f598"
            ]
        ]
    },
    {
        "id": "a82f4707f7d9a754",
        "type": "Axis camera",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "preset": "a5d60ef5587cc8fc",
        "action": "Start recording",
        "resolution": "640x360",
        "output": "Base64",
        "filename": "",
        "options": "",
        "data": "",
        "x": 780,
        "y": 520,
        "wires": [
            [
                "7841c1ea2e076cf2"
            ]
        ]
    },
    {
        "id": "d26ffab47ccd33a5",
        "type": "switch",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "true",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 520,
        "wires": [
            [
                "a82f4707f7d9a754"
            ]
        ]
    },
    {
        "id": "24c1a27f95d4f598",
        "type": "switch",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "false",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "false",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 560,
        "wires": [
            [
                "25f140717e2c97bf"
            ]
        ]
    },
    {
        "id": "af7d03cf2de91230",
        "type": "Axis camera",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "preset": "a5d60ef5587cc8fc",
        "action": "Stop recording",
        "resolution": "640x360",
        "output": "Base64",
        "filename": "",
        "options": "",
        "data": "",
        "x": 1340,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "161bd4d4c74b7e65",
        "type": "debug",
        "z": "ae269942a71da74c",
        "g": "2c977112e11f335a",
        "name": "debug 195",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 1700,
        "wires": []
    },
    {
        "id": "dd08d9f3d51e7270",
        "type": "inject",
        "z": "ae269942a71da74c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 840,
        "wires": [
            [
                "747deb95185e3da8"
            ]
        ]
    },
    {
        "id": "f8e9c187c5261be2",
        "type": "inject",
        "z": "ae269942a71da74c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 160,
        "wires": [
            [
                "581749b9052f0d27"
            ]
        ]
    },
    {
        "id": "7841c1ea2e076cf2",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "recordingid",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "1b0cee4c4f2bb10e",
        "type": "change",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "recordingid",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 560,
        "wires": [
            [
                "af7d03cf2de91230"
            ]
        ]
    },
    {
        "id": "5a42be09e6f6b8e7",
        "type": "trigger",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "",
        "op1": "",
        "op2": "false",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "10",
        "extend": true,
        "overrideDelay": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 970,
        "y": 560,
        "wires": [
            [
                "1b0cee4c4f2bb10e"
            ]
        ]
    },
    {
        "id": "25f140717e2c97bf",
        "type": "function",
        "z": "ae269942a71da74c",
        "g": "90ddef6b96ad0392",
        "name": "bufferSeconds",
        "func": "msg.delay = flow.get(\"settings\").bufferSeconds * 1000;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 560,
        "wires": [
            [
                "5a42be09e6f6b8e7"
            ]
        ]
    },
    {
        "id": "dbb8d0391d851126",
        "type": "ui_group",
        "name": "Settings",
        "tab": "2b750dde31c37dc7",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "30a8c3248949b084",
        "type": "mqtt-broker",
        "name": "MQTT Broker",
        "broker": "10.13.8.20",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "fda7172182602d9f",
        "type": "ui_group",
        "name": "Recordings",
        "tab": "2b750dde31c37dc7",
        "order": 2,
        "disp": true,
        "width": "13",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a5d60ef5587cc8fc",
        "type": "Device Access",
        "name": "Localhost",
        "address": "localhost",
        "protocol": "http"
    },
    {
        "id": "2b750dde31c37dc7",
        "type": "ui_tab",
        "name": "Recorder Agent",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    }
]

[
    {
        "id": "378f2327429a44b8",
        "type": "tab",
        "label": "Parking Transition",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "471323089555ed59",
        "type": "group",
        "z": "378f2327429a44b8",
        "name": "Parking Space",
        "style": {
            "stroke": "#000000",
            "fill": "#ffffbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "fba6cca4238a6bec",
            "4df05090b88890fe",
            "cdd15f4320c4b2be",
            "7c76a3b2c8b12385",
            "380d9b6a71651529",
            "b00cc4bc3bba79b9",
            "79bca7f594928f04",
            "132134b81f372290",
            "23c895f4b76fdd72",
            "679986952f4eb2c8",
            "c7fedfd9c0258217",
            "729655b11f5ecaa0",
            "a743bfa8a5efcd48",
            "c418b54fafe13cb7",
            "03f91d0155cf8b9f",
            "df2a883b9fa82b64",
            "36f8d8cea8db5024",
            "895399a9ca4fe61f",
            "e45d67f08ef12290",
            "8c6ad57556f53acd",
            "116ac8c2f813389e",
            "b8a96c2b22dd4100",
            "a3b760d0df8bb253",
            "e16d5c79645ed600",
            "75e97e34c365379e",
            "99c59969e7a56918",
            "c18e6a8a2654839f",
            "4372bf2033fccef3",
            "659a695129e680cf",
            "bc58747407b8cbae",
            "7559802c976036ff",
            "57a310f8a33dfa6b"
        ],
        "x": 114,
        "y": 759,
        "w": 832,
        "h": 362
    },
    {
        "id": "1040950f3a12e5f7",
        "type": "group",
        "z": "378f2327429a44b8",
        "name": "Video and Augmentation",
        "style": {
            "stroke": "#000000",
            "fill": "#e3f3d3",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1fd4f651a05150d4",
            "56e3e6ed56ac8761",
            "0479f9dc055be213",
            "18c84c856c114fd1",
            "861c717c44f8c0df",
            "d3047674f5184afd",
            "e86b80435a51da66",
            "52863cf447d850f8",
            "d25eb1061be6c92e",
            "20a7f04227ced058",
            "d2227e5e38bf6d9d",
            "6356c3082cb52180"
        ],
        "x": 114,
        "y": 499,
        "w": 1022,
        "h": 222
    },
    {
        "id": "4dc90addd7c0789b",
        "type": "group",
        "z": "378f2327429a44b8",
        "name": "Initialization & configuration",
        "style": {
            "label": true,
            "stroke": "#000000",
            "fill": "#dbcbe7",
            "color": "#000000"
        },
        "nodes": [
            "14e459b9994a6018",
            "ecc84858c127480f",
            "8d913dd1a30468b3",
            "704325c0aa35e63c",
            "1b1685e6f79cc08a",
            "071c57d92d461b8b",
            "23643048a21903d2",
            "4fd57ad35d9e2e86",
            "65261c8d5ca7f228",
            "1c66e07fa5222635",
            "633835917acee535",
            "55eb6f75943454f1",
            "bb604daae169b132"
        ],
        "x": 114,
        "y": 239,
        "w": 832,
        "h": 222
    },
    {
        "id": "1fd4f651a05150d4",
        "type": "ui_template",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "group": "a39319e8fe427572",
        "name": "Augmented Video and Selectbox",
        "order": 0,
        "width": "16",
        "height": "9",
        "format": "<link rel=\"stylesheet\" href=\"/css/imgareaselect-default.css\">\n<script src=\"/js/media-stream-player.min.js\"></script>\n<script src=\"/js/jquery.imgareaselect.js\"></script>\n\n<div id=\"view\" style=\"width:800px; height:450px;\">\n    <div id=\"{{'canvas_'+$id}}\" style=\"width:100%; height:100%; position:relative\">\n        <img id=\"{{'image_'+$id}}\" class=\"card-img-top\" src=\"\" alt=\"Image\" style=\"width:100%; height:100%; position:absolute; top:0px; left:0px;\">\n        <div id=\"{{'video_'+$id}}\" style=\"width:100%; height:100%; position:absolute; top:0px; left:0px;\"></div>\n        <canvas id=\"{{'vehicles_'+$id}}\" width=\"1000\" height=\"1000\" style=\"width:100%; height:100%; position:absolute; top:0px; left:0px;\"></canvas>\n        <canvas id=\"{{'parkings_'+$id}}\" width=\"1000\" height=\"1000\" style=\"width:100%; height:100%; position:absolute; top:0px; left:0px;\"></canvas>    </div>\n</div>\n\n<script>\nvar imageWidth = 1280;\nvar imageHeight = 720;\nvar viewWidth = 800;\nvar viewHeight = 450;\nvar selectBox = null;\nvar hold = false;\nvar boxId = \"None\";\n\nfunction drawVehicles( data, scope ) {\n    var canvas = document.getElementById(\"vehicles_\"+scope.$id);\n    var ctx = canvas.getContext(\"2d\");\n\n    ctx.beginPath();\n    ctx.clearRect(0, 0, 1000, 1000 );\n    ctx.stroke();\n    ctx.font = \"30px Arial\";\n    ctx.fillStyle = '#FFFFFF';\n    ctx.strokeStyle = '#FFFFFF';\n    ctx.beginPath();\n    data.forEach(function(detection) {\n          ctx.moveTo(detection.cx, detection.cy);\n          ctx.arc(detection.cx, detection.cy, 5, 0, 2 * Math.PI);\n          ctx.fillText(detection.class + ' (' + detection.confidence + ')', detection.cx - 40, detection.cy-10);\n    });\n    ctx.fill();\n}\n\n\nfunction drawParkings( data, scope ) {\n  var canvas = document.getElementById(\"parkings_\"+scope.$id);\n  var ctx = canvas.getContext(\"2d\");\n\n  ctx.beginPath();\n  ctx.clearRect(0, 0, 1000, 1000 );\n  ctx.stroke();\n\n  //Draw transitions\n  ctx.lineWidth = 3;\n  ctx.font = \"30px Arial\";\n  ctx.fillStyle = '#FFFF00';\n  ctx.strokeStyle = '#FFFF00';\n  ctx.beginPath();\n  data.forEach(function(item) {\n      var width = item.x2 - item.x1;\n      var height = item.y2 - item.y1;\n      if( item.transition === true ) {\n          ctx.rect(item.x1, item.y1,width,height );\n          ctx.fillText(item.name, item.x1, item.y1 - 10 );\n      }\n  });\n  ctx.stroke();\n\n  // Draw Occupied\n\n  ctx.fillStyle = '#FF0000';\n  ctx.strokeStyle = '#FF0000';\n  ctx.beginPath();\n  data.forEach(function(item) {\n      var width = item.x2 - item.x1;\n      var height = item.y2 - item.y1;\n      if( item.state === true && item.transition === false ) {\n          ctx.rect(item.x1, item.y1,width,height );\n          ctx.fillText(item.name, item.x1, item.y1 - 10 );\n      }\n  });\n  ctx.stroke();\n\n  // Draw Free\n  \n  ctx.fillStyle = '#00FF00';\n  ctx.strokeStyle = '#00FF00';\n  ctx.beginPath();\n  data.forEach(function(item) {\n      var width = item.x2 - item.x1;\n      var height = item.y2 - item.y1;\n      if( item.state === false && item.transition === false ) {\n          ctx.rect(item.x1, item.y1,width,height );\n          ctx.fillText(item.name, item.x1, item.y1 - 10 );\n      }\n  });\n  ctx.stroke();\n\n}\n\n(function(scope) {\n  scope.$watch('msg', function(msg) {\n    if (!msg)\n      return;\n    console.log(msg.topic);\n    if( msg.topic === \"video\" ) {\n        width = msg.width || 1280;\n        height = msg.height || 720;\n        if( selectBox )\n            selectBox.setOptions({hide: true});\n\n        $(\"#image_\"+scope.$id).attr('src','http://'+window.location.hostname+'/axis-cgi/jpg/image.cgi?_='+new Date().getTime());\n        $(\"#video_\"+scope.$id).empty();\n        if( msg.payload ) {\n          var player = '<media-stream-player hostname=\"'+window.location.hostname+'\" format=\"RTP_H264\" compression=\"40\" audio=\"0\" resolution=\"'+width+'x'+height+'\" variant=\"basic\" autoplay></media-stream-player>';\n          $(\"#video_\"+scope.$id).append(player);\n        }\n    }\n\n    if( msg.topic === \"vehicles\" )\n      drawVehicles( msg.payload, scope );\n\n    if( msg.topic === \"parkings\" )\n       drawParkings( msg.payload, scope );\n\n    if( msg.topic === \"hold\" ) {\n      hold = msg.payload;\n      return;\n    }\n\n    if( msg.topic === \"box\") {\n        if( selectBox ) {\n          selectBox.setOptions({hide: true});\n          delete selectBox;\n          selectBox = 0;\n        }\n\n        if( typeof msg.payload !== \"object\" )\n          return;\n        boxId = msg.payload.id || \"None\";\n        selectBox = $(\"#image_\"+scope.$id).imgAreaSelect({\n            x1: parseInt((msg.payload.x1 / 1000) * viewWidth),\n            y1: parseInt((msg.payload.y1 / 1000) * viewHeight),\n            x2: parseInt((msg.payload.x2 / 1000) * viewWidth),\n            y2: parseInt((msg.payload.y2 / 1000) * viewHeight),\n            minHeight: 20,\n            minWidth: 20,\n            handles: true,\n            enable:true,movable:true,resizable:true,show:true,\n            instance: true,\n            onSelectEnd: function( image, area ) {\n                var box = {\n                    x1: parseInt((area.x1 / viewWidth) * 1000),\n                    x2: parseInt((area.x2 / viewWidth) * 1000),\n                    y1: parseInt((area.y1 / viewHeight) * 1000),\n                    y2: parseInt((area.y2 / viewHeight) * 1000)\n                }\n                scope.send({topic:boxId ||\"none\",payload:box});\n            }\n        });\n        selectBox.setOptions({show: true});\n    }\n  });\n})(scope);\n</script>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 680,
        "y": 580,
        "wires": [
            [
                "e86b80435a51da66"
            ]
        ]
    },
    {
        "id": "56e3e6ed56ac8761",
        "type": "ui_button",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "",
        "group": "a39319e8fe427572",
        "order": 1,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "play",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "video",
        "topicType": "str",
        "x": 410,
        "y": 580,
        "wires": [
            [
                "1fd4f651a05150d4"
            ]
        ]
    },
    {
        "id": "0479f9dc055be213",
        "type": "ui_table",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "group": "fcce511190ce3119",
        "name": "",
        "order": 2,
        "width": "10",
        "height": "4",
        "columns": [
            {
                "field": "name",
                "title": "Name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "status",
                "title": "Status",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "time",
                "title": "Time",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 790,
        "y": 640,
        "wires": [
            [
                "d3047674f5184afd"
            ]
        ]
    },
    {
        "id": "fba6cca4238a6bec",
        "type": "ui_button",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "",
        "group": "fcce511190ce3119",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": false,
        "label": "Add",
        "tooltip": "",
        "color": "",
        "bgcolor": "green",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "box",
        "topicType": "str",
        "x": 450,
        "y": 800,
        "wires": [
            [
                "4df05090b88890fe"
            ]
        ]
    },
    {
        "id": "4df05090b88890fe",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Add",
        "func": "var parkings = flow.get(\"parkings\") || [];\nvar parkingCounter = flow.get(\"parkingCounter\") || 1;\nvar parking = {\n    id: \"Space\" + parkingCounter,\n    name: \" Space \" + parkingCounter,\n    state: false,  //True = occupancy\n    transition: false,\n    timestamp: new Date().getTime(),\n    start: 0,\n    age: 0,\n    x1: 400,\n    x2: 800,\n    y1: 400,\n    y2: 800\n}\n\nparkingCounter++;\nparkings.push(parking);\nflow.set(\"parkings\",parkings);\nflow.set(\"parkingCounter\",parkingCounter);\nmsg.payload = parking;\nflow.set(\"parking\",parking);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 800,
        "wires": [
            [
                "a3b760d0df8bb253",
                "bc58747407b8cbae"
            ]
        ]
    },
    {
        "id": "18c84c856c114fd1",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "parkings",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "parkings",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 640,
        "wires": [
            [
                "20a7f04227ced058",
                "1fd4f651a05150d4"
            ]
        ]
    },
    {
        "id": "861c717c44f8c0df",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "link in 7",
        "links": [
            "af0b70aa144b9ce9",
            "e40ede34584c6a06",
            "79bca7f594928f04",
            "679986952f4eb2c8",
            "1c66e07fa5222635",
            "659a695129e680cf",
            "a3b760d0df8bb253",
            "c1ce34adcb92e6aa"
        ],
        "x": 235,
        "y": 640,
        "wires": [
            [
                "18c84c856c114fd1"
            ]
        ]
    },
    {
        "id": "d3047674f5184afd",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "box",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "parking",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 640,
        "wires": [
            [
                "52863cf447d850f8"
            ]
        ]
    },
    {
        "id": "e86b80435a51da66",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "Parking bounding box",
        "func": "var parkings = flow.get(\"parkings\") || [];\nvar id = msg.topic;\n\nparkings.forEach(function(item){\n    if( item.id === id ) {\n        item.x1 = msg.payload.x1;\n        item.x2 = msg.payload.x2;\n        item.y1 = msg.payload.y1;\n        item.y2 = msg.payload.y2;\n    }\n})\n\nflow.set(\"parkings\", parkings);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "52863cf447d850f8",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "7c76a3b2c8b12385",
            "d25eb1061be6c92e",
            "895399a9ca4fe61f",
            "729655b11f5ecaa0"
        ],
        "x": 1095,
        "y": 640,
        "wires": []
    },
    {
        "id": "cdd15f4320c4b2be",
        "type": "ui_text_input",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Name",
        "label": "Name",
        "tooltip": "",
        "group": "fcce511190ce3119",
        "order": 3,
        "width": "0",
        "height": "0",
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 450,
        "y": 960,
        "wires": [
            [
                "b00cc4bc3bba79b9"
            ]
        ]
    },
    {
        "id": "7c76a3b2c8b12385",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 9",
        "links": [
            "52863cf447d850f8",
            "a3b760d0df8bb253"
        ],
        "x": 155,
        "y": 960,
        "wires": [
            [
                "380d9b6a71651529"
            ]
        ]
    },
    {
        "id": "380d9b6a71651529",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Enable",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "parking.name",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 960,
        "wires": [
            [
                "cdd15f4320c4b2be"
            ]
        ]
    },
    {
        "id": "b00cc4bc3bba79b9",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Name",
        "func": "var parkings = flow.get(\"parkings\") || {};\nvar parking = flow.get(\"parking\");\n\nif( parking === null )\n    return;\n\nparking.name = msg.payload;\n\nparkings.forEach(function(item){\n    if( item.id === parking.id )\n        item.name = parking.name;\n})\n\n\nflow.set(\"parkings\",parkings);\nflow.set(\"parking\",parking);\nmsg.payload = parking;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 960,
        "wires": [
            [
                "79bca7f594928f04"
            ]
        ]
    },
    {
        "id": "79bca7f594928f04",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link out 9",
        "mode": "link",
        "links": [
            "861c717c44f8c0df"
        ],
        "x": 695,
        "y": 960,
        "wires": []
    },
    {
        "id": "132134b81f372290",
        "type": "ui_button",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Save",
        "group": "fcce511190ce3119",
        "order": 4,
        "width": "0",
        "height": "0",
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "blue",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 450,
        "y": 880,
        "wires": [
            [
                "23c895f4b76fdd72",
                "b8a96c2b22dd4100"
            ]
        ]
    },
    {
        "id": "23c895f4b76fdd72",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "box",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 880,
        "wires": [
            [
                "679986952f4eb2c8"
            ]
        ]
    },
    {
        "id": "679986952f4eb2c8",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link out 10",
        "mode": "link",
        "links": [
            "861c717c44f8c0df",
            "d25eb1061be6c92e"
        ],
        "x": 795,
        "y": 880,
        "wires": []
    },
    {
        "id": "c7fedfd9c0258217",
        "type": "ui_button",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "",
        "group": "fcce511190ce3119",
        "order": 5,
        "width": "0",
        "height": "0",
        "passthru": false,
        "label": "remove",
        "tooltip": "",
        "color": "",
        "bgcolor": "red",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 460,
        "y": 1040,
        "wires": [
            [
                "4372bf2033fccef3"
            ]
        ]
    },
    {
        "id": "f76b3249d0c4b039",
        "type": "debug",
        "z": "378f2327429a44b8",
        "name": "Occupied",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 80,
        "wires": []
    },
    {
        "id": "601829d8c9eef57f",
        "type": "function",
        "z": "378f2327429a44b8",
        "name": "Parking Transition",
        "func": "var vehicles = msg.payload;\nvar timestamp = new Date().getTime();\n\nvar parkings = flow.get(\"parkings\") || [];\n\nparkings.forEach(function(parking) {\n    if( !parking.start )\n        parking.start = timestamp;\n    parking.age = (timestamp - parking.start) / 1000;\n\n    vehicles.forEach(function(vehicle) {\n        if( vehicle.cx < parking.x1 || vehicle.cx > parking.x2 || vehicle.cy < parking.y1 || vehicle.cy > parking.y2 )\n            return;\n        parking.timestamp = timestamp;\n    });\n})\n\nflow.set(\"parkings\",parkings);\n\nvar transition = flow.get(\"transition\") || 15;\n\nparkings.forEach( function(parking) {\n    var sinceLastUpdate = (timestamp - parking.timestamp) / 1000;\n\n    if( parking.state === false && parking.transition === false && sinceLastUpdate < transition ) {\n        parking.transition = true;\n        parking.start = timestamp;\n        parking.age = 0;\n        flow.set(\"parkings\",parkings);\n        msg.payload = parking;\n        msg.topic = \"transition\";\n        node.send(msg);\n        return;\n    }\n\n//node.warn(\"Age:\" + parking.age + \" Limit:\" + transition);\n\n    if( parking.state === false && parking.transition === true && parking.age > transition ) {\n        parking.state = true;\n        parking.transition = false;\n        msg.payload = parking;\n        msg.topic = \"occupied\";\n        flow.set(\"parkings\",parkings);\n        node.send(msg);\n        return;\n    }\n\n    if( parking.state === true && parking.transition === true && sinceLastUpdate < 1 ) {\n        parking.transition = false;\n        return;\n    }\n\n    if( parking.state === true && parking.transition === false && sinceLastUpdate > 1 ) {\n        parking.transition = true;\n        flow.set(\"parkings\",parkings);\n        msg.payload = parking;\n        msg.topic = \"transition\";\n        flow.set(\"parkings\",parkings);\n        node.send(msg);\n        return;\n    }\n\n    if( parking.state === true && parking.transition === true && sinceLastUpdate > transition ) {\nnode.warn(\"Free\");\n        parking.state = false;\n        parking.transition = false;\n        msg.payload = parking;\n        msg.topic = \"free\";\n        flow.set(\"parkings\",parkings);\n        node.send(msg);\n        parking.age = 0;\n        parking.start = timestamp;\n        return;\n    }\n//node.warn(\"State: \" + parking.state + \" Transition: \" + parking.transition );\n\n});\n\nflow.set(\"parkings\",parkings);\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 80,
        "wires": [
            [
                "c1ce34adcb92e6aa",
                "43b59ab5688ca0b4",
                "9e690b9bab78cbba",
                "9df29b3a2b981da2"
            ]
        ]
    },
    {
        "id": "392f41805d89c10e",
        "type": "function",
        "z": "378f2327429a44b8",
        "name": "Filter",
        "func": "var detections = msg.payload.detections;\nvar timestamp = new Date().getTime();\nvar confidence = flow.get(\"confidence\") || 50;\n\nvar vehicles = [];\n\ndetections.forEach(function(detection) {\n    if( detection.confidence < confidence )\n        return;\n\n    if( detection.class === \"Human\" )\n        return;\n\n    if( detection.class === \"Face\")\n        return;\n\n    if( detection.class === \"License plate\")\n        return;\n\n    if( detection.class === \"Object\")\n        return;\n\n    if( detection.width < 20 )\n        return;\n\n    if( detection.hight < 20 )\n        return;\n    vehicles.push(detection);\n})\n\nmsg.topic = \"vehicles\";\nmsg.payload = vehicles;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 80,
        "wires": [
            [
                "601829d8c9eef57f",
                "6e7749d852998c51"
            ]
        ]
    },
    {
        "id": "8d72f196a59ce718",
        "type": "Objects",
        "z": "378f2327429a44b8",
        "output": "1",
        "classFilter": "-1",
        "confidence": "50",
        "rotation": "0",
        "cog": "1",
        "predictions": "1",
        "x": 240,
        "y": 80,
        "wires": [
            [
                "392f41805d89c10e"
            ]
        ]
    },
    {
        "id": "14e459b9994a6018",
        "type": "ui_numeric",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "",
        "label": "Confidence",
        "tooltip": "",
        "group": "93de07998e2657d7",
        "order": 2,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}}",
        "min": 0,
        "max": "120",
        "step": "10",
        "className": "",
        "x": 650,
        "y": 420,
        "wires": [
            [
                "ecc84858c127480f"
            ]
        ]
    },
    {
        "id": "ecc84858c127480f",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "flow.confidence",
        "rules": [
            {
                "t": "set",
                "p": "confidence",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "8d913dd1a30468b3",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "Transition",
        "func": "msg.payload = flow.get(\"transition\") || 15;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 380,
        "wires": [
            [
                "1b1685e6f79cc08a"
            ]
        ]
    },
    {
        "id": "704325c0aa35e63c",
        "type": "inject",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "Node-RED Started",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 380,
        "wires": [
            [
                "8d913dd1a30468b3",
                "23643048a21903d2"
            ]
        ]
    },
    {
        "id": "1b1685e6f79cc08a",
        "type": "ui_numeric",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "",
        "label": "Transition",
        "tooltip": "",
        "group": "93de07998e2657d7",
        "order": 2,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}} s",
        "min": "5",
        "max": "120",
        "step": "5",
        "className": "",
        "x": 640,
        "y": 380,
        "wires": [
            [
                "071c57d92d461b8b"
            ]
        ]
    },
    {
        "id": "071c57d92d461b8b",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "flow.transition",
        "rules": [
            {
                "t": "set",
                "p": "transition",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "23643048a21903d2",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "confidence",
        "func": "msg.payload = flow.get(\"confidence\") || 50;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 420,
        "wires": [
            [
                "14e459b9994a6018"
            ]
        ]
    },
    {
        "id": "4fd57ad35d9e2e86",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "Tab Parking Transition",
        "func": "msg.topic = \"video\";\n\nif( msg.payload !== \"change\" )\n    return;\nif( msg.name === \"Parking Transition\" )\n    msg.payload = true;\nelse\n    msg.payload = false;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 280,
        "wires": [
            [
                "1c66e07fa5222635",
                "55eb6f75943454f1"
            ]
        ]
    },
    {
        "id": "65261c8d5ca7f228",
        "type": "ui_ui_control",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "",
        "events": "all",
        "x": 220,
        "y": 280,
        "wires": [
            [
                "4fd57ad35d9e2e86",
                "633835917acee535"
            ]
        ]
    },
    {
        "id": "d25eb1061be6c92e",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "link in 11",
        "links": [
            "1c66e07fa5222635",
            "6e7749d852998c51",
            "52863cf447d850f8",
            "dfec3bf41706449b",
            "679986952f4eb2c8",
            "659a695129e680cf",
            "57a310f8a33dfa6b"
        ],
        "x": 375,
        "y": 540,
        "wires": [
            [
                "1fd4f651a05150d4"
            ]
        ]
    },
    {
        "id": "1c66e07fa5222635",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "link out 11",
        "mode": "link",
        "links": [
            "d25eb1061be6c92e",
            "861c717c44f8c0df"
        ],
        "x": 615,
        "y": 280,
        "wires": []
    },
    {
        "id": "6e7749d852998c51",
        "type": "link out",
        "z": "378f2327429a44b8",
        "name": "Detections",
        "mode": "link",
        "links": [
            "d25eb1061be6c92e"
        ],
        "x": 595,
        "y": 120,
        "wires": []
    },
    {
        "id": "729655b11f5ecaa0",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 12",
        "links": [
            "a3b760d0df8bb253",
            "52863cf447d850f8"
        ],
        "x": 155,
        "y": 1040,
        "wires": [
            [
                "a743bfa8a5efcd48"
            ]
        ]
    },
    {
        "id": "a743bfa8a5efcd48",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Enable",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 1040,
        "wires": [
            [
                "c7fedfd9c0258217"
            ]
        ]
    },
    {
        "id": "c418b54fafe13cb7",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 13",
        "links": [
            "b8a96c2b22dd4100",
            "bb604daae169b132",
            "659a695129e680cf"
        ],
        "x": 155,
        "y": 1080,
        "wires": [
            [
                "03f91d0155cf8b9f"
            ]
        ]
    },
    {
        "id": "03f91d0155cf8b9f",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Disable",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 1080,
        "wires": [
            [
                "c7fedfd9c0258217"
            ]
        ]
    },
    {
        "id": "df2a883b9fa82b64",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Disable",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "  ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 1000,
        "wires": [
            [
                "cdd15f4320c4b2be"
            ]
        ]
    },
    {
        "id": "36f8d8cea8db5024",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 14",
        "links": [
            "b8a96c2b22dd4100",
            "bb604daae169b132",
            "659a695129e680cf"
        ],
        "x": 155,
        "y": 1000,
        "wires": [
            [
                "df2a883b9fa82b64"
            ]
        ]
    },
    {
        "id": "895399a9ca4fe61f",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 15",
        "links": [
            "52863cf447d850f8",
            "a3b760d0df8bb253"
        ],
        "x": 155,
        "y": 880,
        "wires": [
            [
                "e45d67f08ef12290"
            ]
        ]
    },
    {
        "id": "e45d67f08ef12290",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Enable",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "parking.name",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 880,
        "wires": [
            [
                "132134b81f372290"
            ]
        ]
    },
    {
        "id": "8c6ad57556f53acd",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Disable",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 920,
        "wires": [
            [
                "132134b81f372290"
            ]
        ]
    },
    {
        "id": "116ac8c2f813389e",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 16",
        "links": [
            "b8a96c2b22dd4100",
            "bb604daae169b132",
            "659a695129e680cf"
        ],
        "x": 155,
        "y": 920,
        "wires": [
            [
                "8c6ad57556f53acd"
            ]
        ]
    },
    {
        "id": "b8a96c2b22dd4100",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link out 13",
        "mode": "link",
        "links": [
            "36f8d8cea8db5024",
            "116ac8c2f813389e",
            "c418b54fafe13cb7",
            "99c59969e7a56918"
        ],
        "x": 555,
        "y": 920,
        "wires": []
    },
    {
        "id": "a3b760d0df8bb253",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link out 14",
        "mode": "link",
        "links": [
            "895399a9ca4fe61f",
            "7c76a3b2c8b12385",
            "729655b11f5ecaa0",
            "c18e6a8a2654839f",
            "861c717c44f8c0df"
        ],
        "x": 745,
        "y": 840,
        "wires": []
    },
    {
        "id": "e16d5c79645ed600",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Enable",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "parking.name",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 800,
        "wires": [
            [
                "fba6cca4238a6bec"
            ]
        ]
    },
    {
        "id": "75e97e34c365379e",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Disable",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 840,
        "wires": [
            [
                "fba6cca4238a6bec"
            ]
        ]
    },
    {
        "id": "99c59969e7a56918",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 17",
        "links": [
            "b8a96c2b22dd4100",
            "bb604daae169b132",
            "659a695129e680cf"
        ],
        "x": 155,
        "y": 800,
        "wires": [
            [
                "e16d5c79645ed600"
            ]
        ]
    },
    {
        "id": "c18e6a8a2654839f",
        "type": "link in",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link in 18",
        "links": [
            "a3b760d0df8bb253"
        ],
        "x": 155,
        "y": 840,
        "wires": [
            [
                "75e97e34c365379e"
            ]
        ]
    },
    {
        "id": "4372bf2033fccef3",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "Add",
        "func": "var parkings = flow.get(\"parkings\") || [];\nvar parking = flow.get(\"parking\") || null;\n\nif(!parking)\n    return;\n\nvar keep = [];\n\nparkings.forEach(function(element) {\n    if( element.id !== parking.id )\n        keep.push(element);\n});\nflow.set(\"parkings\",keep);\nflow.set(\"parking\",null);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1040,
        "wires": [
            [
                "7559802c976036ff"
            ]
        ]
    },
    {
        "id": "659a695129e680cf",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link out 15",
        "mode": "link",
        "links": [
            "861c717c44f8c0df",
            "99c59969e7a56918",
            "116ac8c2f813389e",
            "36f8d8cea8db5024",
            "c418b54fafe13cb7",
            "d25eb1061be6c92e"
        ],
        "x": 905,
        "y": 1040,
        "wires": []
    },
    {
        "id": "633835917acee535",
        "type": "debug",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "debug 24",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 320,
        "wires": []
    },
    {
        "id": "55eb6f75943454f1",
        "type": "delay",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 650,
        "y": 320,
        "wires": [
            [
                "bb604daae169b132"
            ]
        ]
    },
    {
        "id": "bb604daae169b132",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "4dc90addd7c0789b",
        "name": "link out 16",
        "mode": "link",
        "links": [
            "99c59969e7a56918",
            "116ac8c2f813389e",
            "36f8d8cea8db5024",
            "c418b54fafe13cb7"
        ],
        "x": 815,
        "y": 320,
        "wires": []
    },
    {
        "id": "bc58747407b8cbae",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "box",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 800,
        "wires": [
            [
                "57a310f8a33dfa6b"
            ]
        ]
    },
    {
        "id": "7559802c976036ff",
        "type": "change",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "box",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "null",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 1040,
        "wires": [
            [
                "659a695129e680cf"
            ]
        ]
    },
    {
        "id": "57a310f8a33dfa6b",
        "type": "link out",
        "z": "378f2327429a44b8",
        "g": "471323089555ed59",
        "name": "link out 17",
        "mode": "link",
        "links": [
            "d25eb1061be6c92e"
        ],
        "x": 905,
        "y": 800,
        "wires": []
    },
    {
        "id": "c1ce34adcb92e6aa",
        "type": "link out",
        "z": "378f2327429a44b8",
        "name": "link out 18",
        "mode": "link",
        "links": [
            "861c717c44f8c0df"
        ],
        "x": 895,
        "y": 200,
        "wires": []
    },
    {
        "id": "43b59ab5688ca0b4",
        "type": "switch",
        "z": "378f2327429a44b8",
        "name": "parking cccupied state",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "occupied ",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "f76b3249d0c4b039"
            ]
        ]
    },
    {
        "id": "9e690b9bab78cbba",
        "type": "switch",
        "z": "378f2327429a44b8",
        "name": "parking free state",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "free",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 970,
        "y": 120,
        "wires": [
            [
                "a16aca7c7ebe3c1b"
            ]
        ]
    },
    {
        "id": "a16aca7c7ebe3c1b",
        "type": "debug",
        "z": "378f2327429a44b8",
        "name": "Free",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 120,
        "wires": []
    },
    {
        "id": "20a7f04227ced058",
        "type": "function",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "List",
        "func": "var parkings = flow.get(\"parkings\") || [];\nvar list = [];\nparkings.forEach(function(element) {\n    var time = element.age;\n    var hours = parseInt(time / 3600);\n    var minutes = parseInt((time - (hours*3600))/60);\n    var seconds =  parseInt(time - (hours*3600) - (minutes * 60));\n    var timestring = (\"00\" + hours).substr(-2) + \":\" + (\"00\" + minutes).substr(-2)+\":\"+(\"00\" + seconds).substr(-2);\n    var status = element.state?\"Occupied\":\"Free\";\n    if( element.transition )\n        status = \"Transition\";\n    element.time = timestring;\n    element.status = status;\n    list.push(element);\n});\n\nmsg.payload = list;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 640,
        "wires": [
            [
                "0479f9dc055be213",
                "6356c3082cb52180"
            ]
        ]
    },
    {
        "id": "d2227e5e38bf6d9d",
        "type": "inject",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "2",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 580,
        "wires": [
            [
                "18c84c856c114fd1"
            ]
        ]
    },
    {
        "id": "6356c3082cb52180",
        "type": "debug",
        "z": "378f2327429a44b8",
        "g": "1040950f3a12e5f7",
        "name": "debug 27",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 680,
        "wires": []
    },
    {
        "id": "895133bbddfa7a24",
        "type": "comment",
        "z": "378f2327429a44b8",
        "name": "Vehicle detections",
        "info": "",
        "x": 710,
        "y": 120,
        "wires": []
    },
    {
        "id": "25eee060cb56c8fd",
        "type": "comment",
        "z": "378f2327429a44b8",
        "name": "All transitions",
        "info": "",
        "x": 990,
        "y": 200,
        "wires": []
    },
    {
        "id": "9df29b3a2b981da2",
        "type": "switch",
        "z": "378f2327429a44b8",
        "name": "transition state",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "transition ",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 960,
        "y": 160,
        "wires": [
            [
                "83ef1828b380d9b1"
            ]
        ]
    },
    {
        "id": "83ef1828b380d9b1",
        "type": "debug",
        "z": "378f2327429a44b8",
        "name": "Transition",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 160,
        "wires": []
    },
    {
        "id": "a39319e8fe427572",
        "type": "ui_group",
        "name": "Video",
        "tab": "c167f2769a4372dc",
        "order": 1,
        "disp": false,
        "width": "16",
        "collapse": false,
        "className": ""
    },
    {
        "id": "fcce511190ce3119",
        "type": "ui_group",
        "name": "Parking spaces",
        "tab": "c167f2769a4372dc",
        "order": 3,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "93de07998e2657d7",
        "type": "ui_group",
        "name": "Control",
        "tab": "c167f2769a4372dc",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c167f2769a4372dc",
        "type": "ui_tab",
        "name": "Parking Transition",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    }
]
